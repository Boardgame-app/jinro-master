<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <link rel="preload" as="image" href="png/bgday.png" type="image/png">
    <link rel="preload" as="image" href="png/bodygard.png" type="image/png">
    <link rel="preload" as="image" href="png/continue.png" type="image/png">
    <link rel="preload" as="image" href="png/draw.png" type="image/png">
    <link rel="preload" as="image" href="png/himanji.png" type="image/png">
    <link rel="preload" as="image" href="png/hunter.png" type="image/png">
    <link rel="preload" as="image" href="png/jinro.png" type="image/png">
    <link rel="preload" as="image" href="png/jinrowin.png" type="image/png">
    <link rel="preload" as="image" href="png/reibai.png" type="image/png">
    <link rel="preload" as="image" href="png/samurai.png" type="image/png">
    <link rel="preload" as="image" href="png/shimin.png" type="image/png">
    <link rel="preload" as="image" href="png/shiminwin.png" type="image/png">
    <link rel="preload" as="image" href="png/syounen.png" type="image/png">
    <link rel="preload" as="image" href="png/toubou.png" type="image/png">
    <link rel="preload" as="image" href="png/toughguy.png" type="image/png">
    <link rel="preload" as="image" href="png/uragiri.png" type="image/png">
    <link rel="preload" as="image" href="png/uranai.png" type="image/png">
    <link rel="preload" as="image" href="png/wolf.png" type="image/png">
    <link rel="preload" as="image" href="png/youko.png" type="image/png">
    <link rel="preload" as="image" href="png/youkowin.png" type="image/png">
    <meta property="og:title" content="人狼マスター">
    <meta property="og:description" content="恐ろしい夜がやってきます">
    <meta property="og:image" content="https://jinro-master.netlify.app/png/bg.png">
</head>

<body>
    <div class="bg-layer"></div>
    <div id="startscreen" onclick="start()">
        <div>
            <img id="title-image" src="png/title.png" />
        </div>
        <div class="parent-container">
            <div id="start" class="fade-blink">タップでスタート</div>
            <div id="copyright">
                <p>Version3.1 / ©2025 shoot</p>
            </div>
        </div>
    </div>

    <!-- カード表示モーダル -->
    <div id="cardModal" class="modal">
        <div class="modal-content">
            <img id="modalImage" alt="">
            <div class="modal-footer">
                <button onclick="closeCardModal()">閉じる</button>
            </div>
        </div>
    </div>

    <div id="content">
        <div id="main">
            <div class="control-panel">
                <button class="btn-a" id="btnJobset" onclick="OpenJobSelecter()">村設定</button>
                <!--<button id="btn5" onclick="toggleRows()">表示切替</button>-->
                <button class="btn-b" id="btn4" onclick="execute()">ゲーム開始</button>
                <button class="btn-c" onclick="openTimerModal()">タイマー</button>
                <button class="btn-d" id="btn6" onclick="ecModalopen()" id="btn6" disabled>フラグ実行</button>

                <!-- フラグ実行前警告モーダル -->
                <div id="exModal" class="modal">
                    <div class="modal-content">
                        <span style="color: orange; font-size: 32px;">⚠️</span>
                        <p id="alert"></p>
                        <div id="missingRoles" class="left-list"></div>
                        <h2 class="modal-footer">
                            <button onclick="closeexModal()">閉じる</button>
                        </h2>
                    </div>
                </div>

                <!-- ゲーム開始前確認モーダル -->
                <div id="gsModal" class="modal">
                    <div class="modal-content">
                        <h2 class="modal-header">確認</h2>
                        <p>ゲームを開始しますか？</p>
                        <div class="modal-actions">
                            <button onclick="gamestartModal()">Yes</button>
                            <button onclick="closegsModal()">No</button>
                        </div>
                    </div>
                </div>

                <!-- フラグ実行前確認モーダル -->
                <div id="ecModal" class="modal">
                    <div class="modal-content">
                        <h2 class="modal-header">確認</h2>
                        <p>フラグを実行しますか？</p>
                        <div class="modal-actions">
                            <button onclick="resultModal()">Yes</button>
                            <button onclick="closeecModal()">No</button>
                        </div>
                    </div>
                </div>

                <!-- フラグ実行後モーダル -->
                <div id="erModal" class="modal">
                    <div class="modal-content">
                        <h2 class="modal-header">実行結果</h2>
                        <p id="result"></p>
                        <img id="modal-image" src="" alt="条件に応じた画像" />
                        <h2 class="modal-footer">
                            <button onclick="closeErModal()">閉じる</button>
                        </h2>
                    </div>
                </div>

                <template id="job-options">
                    <option value="市民">市民</option>
                    <option value="人狼*">人狼*</option>
                </template>

                <!-- 村設定モーダル -->
                <div id="JobSelectModal" class="modal">
                    <div class="modal-content">
                        <!-- ▼ スクロールする領域 -->
                        <div class="modal-body">
                            <div class="item" data-value="市民">市民</div>
                            <div class="item" data-value="人狼*">人狼</div>
                            <div class="item" data-value="狼少年">狼少年</div>
                            <div class="item" data-value="妖狐">妖狐</div>
                            <div class="item" data-value="占い師*">占い師</div>
                            <div class="item" data-value="ボディガード*">ボディガード</div>
                            <div class="item" data-value="霊媒師*">霊媒師</div>
                            <div class="item" data-value="裏切り者">裏切り者</div>
                            <div class="item" data-value="逃亡者*">逃亡者</div>
                            <div class="item" data-value="サムライ*">サムライ</div>  
                            <div class="item" data-value="ハンター*">ハンター</div>
                            <div class="item" data-value="タフガイ">タフガイ</div>
                            <div class="item" data-value="肥満児">肥満児</div>                                         
                        </div>
                        <h2 class="modal-footer">
                            <button id="applyBtn" onclick="CloseJobSelecter()">設定</button>
                        </h2>
                    </div>
                </div>



            </div>

        </div>

        
        <div class="table-wrapper">

            <table class="scroll-table" id="memberTable">          

                <colgroup>
                    <col style="width: 39%;">
                    <col style="width: 32%;">
                    <col style="width: 12%;">
                    <col style="width: 12%;">
                    <col style="width: 15%;">
                </colgroup>

                <thead><tr>
                    <th>役職</th>
                    <th>名前</th>
                    <th>Flag1</th>
                    <th>Flag2</th>
                    <th>生存</th>
                </tr></thead>

                <tbody>
                    <tr id="row1">
                        <td id="td1" onclick="openCardModalById(1)"><select class="job-select" id="jb1"></select></td>
                        <td><input type="text" id="pn1" class="underline-input" style="font-size: 16px;" placeholder="None" /></td>
                        <td><input type="checkbox" id="fla1"/></td>
                        <td><input type="checkbox" id="flb1"/></td>
                        <td><label class="switch"><input type="checkbox" id="sw1"><span class="slider"></span></label></td>
                    </tr>

                    <tr id="row2">
                        <td id="td2" onclick="openCardModalById(2)"><select class="job-select" id="jb2"></select></td>
                        <td><input type="text" id="pn2" class="underline-input" placeholder="None" /></td>
                        <td><input type="checkbox" id="fla2"/></td>
                        <td><input type="checkbox" id="flb2"/></td>
                        <td><label class="switch"><input type="checkbox" id="sw2"><span class="slider"></span></label></td>
                    </tr>

                    <tr id="row3">
                        <td id="td3" onclick="openCardModalById(3)"><select class="job-select" id="jb3"></select></td>
                        <td><input type="text" id="pn3" class="underline-input" placeholder="None" /></td>
                        <td><input type="checkbox" id="fla3"/></td>
                        <td><input type="checkbox" id="flb3"/></td>
                        <td><label class="switch"><input type="checkbox" id="sw3"><span class="slider"></span></label></td>
                    </tr>

                    <tr id="row4">
                        <td id="td4" onclick="openCardModalById(4)"><select class="job-select" id="jb4"></select></td>
                        <td><input type="text" id="pn4" class="underline-input" placeholder="None" /></td>
                        <td><input type="checkbox" id="fla4"/></td>
                        <td><input type="checkbox" id="flb4"/></td>
                        <td><label class="switch"><input type="checkbox" id="sw4"><span class="slider"></span></label></td>
                    </tr>

                    <tr  id="row5">
                        <td id="td5" onclick="openCardModalById(5)"><select class="job-select" id="jb5"></select></td>
                        <td><input type="text" id="pn5" class="underline-input" placeholder="None" /></td>
                        <td><input type="checkbox" id="fla5"/></td>
                        <td><input type="checkbox" id="flb5"/></td>
                        <td><label class="switch"><input type="checkbox" id="sw5"><span class="slider"></span></label></td>
                    </tr>

                    <tr id="row6">
                        <td id="td6" onclick="openCardModalById(6)"><select class="job-select" id="jb6"></select></td>
                        <td><input type="text" id="pn6" class="underline-input" placeholder="None" /></td>
                        <td><input type="checkbox" id="fla6"/></td>
                        <td><input type="checkbox" id="flb6"/></td>
                        <td><label class="switch"><input type="checkbox" id="sw6"><span class="slider"></span></label></td>
                    </tr>

                    <tr id="row7">
                        <td id="td7" onclick="openCardModalById(7)"><select class="job-select" id="jb7"></select></td>
                        <td><input type="text" id="pn7" class="underline-input" placeholder="None" /></td>
                        <td><input type="checkbox" id="fla7"/></td>
                        <td><input type="checkbox" id="flb7"/></td>
                        <td><label class="switch"><input type="checkbox" id="sw7"><span class="slider"></span></label></td>
                    </tr>

                    <tr id="row8">
                        <td id="td8" onclick="openCardModalById(8)"><select class="job-select" id="jb8"></select></td>
                        <td><input type="text" id="pn8" class="underline-input" placeholder="None" /></td>
                        <td><input type="checkbox" id="fla8"/></td>
                        <td><input type="checkbox" id="flb8"/></td>
                        <td><label class="switch"><input type="checkbox" id="sw8"><span class="slider"></span></label></td>
                    </tr>

                    <tr id="row9">
                        <td id="td9" onclick="openCardModalById(9)"><select class="job-select" id="jb9"></select></td>
                        <td><input type="text" id="pn9" class="underline-input" placeholder="None" /></td>
                        <td><input type="checkbox" id="fla9"/></td>
                        <td><input type="checkbox" id="flb9"/></td>
                        <td><label class="switch"><input type="checkbox" id="sw9"><span class="slider"></span></label></td>
                    </tr>

                    <tr id="row10">
                        <td id="td10" onclick="openCardModalById(10)"><select class="job-select" id="jb10"></td>
                        <td><input type="text" id="pn10" class="underline-input" placeholder="None" /></td>
                        <td><input type="checkbox" id="fla10"/></td>
                        <td><input type="checkbox" id="flb10"/></td>
                        <td><label class="switch"><input type="checkbox" id="sw10"><span class="slider"></span></label></td>
                    </tr>

                    <tr id="row11">
                        <td id="td11" onclick="openCardModalById(11)"><select class="job-select" id="jb11"></td>
                        <td><input type="text" id="pn11" class="underline-input" placeholder="None" /></td>
                        <td><input type="checkbox" id="fla11"/></td>
                        <td><input type="checkbox" id="flb11"/></td>
                        <td><label class="switch"><input type="checkbox" id="sw11"><span class="slider"></span></label></td>
                    </tr>

                    <tr id="row12">
                        <td id="td12" onclick="openCardModalById(12)"><select class="job-select" id="jb12"></td>
                        <td><input type="text" id="pn12" class="underline-input" placeholder="None" /></td>
                        <td><input type="checkbox" id="fla12"/></td>
                        <td><input type="checkbox" id="flb12"/></td>
                        <td><label class="switch"><input type="checkbox" id="sw12"><span class="slider"></span></label></td>
                    </tr>

                </tbody>
            </table>
        </div>

        <!-- リセットボタン -->
        <div class="button-row">
            <button id="btnHelp" class="fixed-footer" onclick="OpenHelpSelectModal()">ヘルプ</button>
            <button id="btnClear" class="fixed-footer"  onclick="openrcModal()" >クリア</button>
        </div>
        
    </div>

    <!-- ヘルプ選択モーダル -->
    <div id="HelpSelectModal" class="modal">
            <div class="modal-content">
                <div class="modal-actions" id="closetype">
                    <button onclick="OpenHelpModal1()">最初の夜について</button>
                    <button onclick="OpenHelpModal2()">夜ターンについて</button>
                    <button onclick="OpenHelpModal3()">昼ターンについて</button>
                    <button onclick="CloseHelpSelectModal()">閉じる</button>
                </div>
            </div>
    </div>

    <!-- ペルプモーダル -->
    <div id="HelpModal" class="modal">
        <div class="modal-content">
            <!-- ▼ スクロールする領域 -->
            <div class="modal-body">
                <p id="Help"></p>
            </div>
            <h2 class="modal-footer">
                <button onclick="CloseHelpModal()">閉じる</button>
            </h2>
        </div>
    </div>

    <!-- リセット前確認モーダル -->
    <div id="rcModal" class="modal">
            <div class="modal-content">
                <div class="modal-actions" id="closetype">
                    <button onclick="jobreset()">役職クリア</button>
                    <button onclick="resetForm()">全てクリア</button>
                    <button onclick="closercModal()">閉じる</button>
                </div>
            </div>
    </div>

    <div id="timerModal" class="modal">
        <div class="modal-content">

            <div class="controls">
                <button onclick="adjustTime(60)">+1分</button>
                <button onclick="adjustTime(10)">+10秒</button>
                <button onclick="adjustTime(1)">+1秒</button>
            </div>

            <h1 id="display">03:00</h1>
            <audio id="alarm" src="se/chime.ogg" preload="auto"></audio>
            <audio id="bgm" src="se/bgm.ogg" preload="auto" loop></audio>

            <div class="controls">
                <button onclick="adjustTime(-60)">-1分</button>
                <button onclick="adjustTime(-10)">-10秒</button>
                <button onclick="adjustTime(-1)">-1秒</button>
            </div>

            <div class="time-input">
                <button id="toggleButton" onclick="toggleTimer()">START</button>
                <button id="resetButton" onclick="resetTimer()">RESET</button>
                <button onclick="closeTimerModal()">CLOSE</button>
            </div>

        </div>
    </div>


    <script src="js/start.js"></script>
    <script src="js/job.js"></script>
    <script src="js/showrow.js"></script>
    <script src="js/card.js"></script>
    <script src="js/execute.js"></script>
    <script src="js/reset.js"></script>
    <script src="js/switch.js"></script>
    <script src="js/help.js"></script>
    <script src="js/timer.js"></script>

</body>
</html>